<html>
  <head>
    <style>
      div.game {
        position: fixed;
        top: 10px;
        left: 10px;
        bottom: 0;
        right: 0;
      }
      div.popup {
        width: 400px;
        height: 400px;
        margin: -200px 0 0 -200px;
        position: fixed;
        z-index: 2;
        left: 50%;
        top: 50%;
        background: #ffffff;
        display: none;
      }
      table {
        border-collapse: collapse;
        width: 100%;
      }
      table, th, td {
        border: 1px solid black;
      }
    </style>
    <script type="text/javascript" src="/socket.io/socket.io.js" ></script>
    <% for(var i = 0; i < scripts.length; i++){ %>
      <script type="text/javascript" src="<%= scripts[i] %>" ></script>
    <% } %>
    <script type="text/javascript" defer="defer">
      $(function(){
        window.Engine.plugins.push(window.SnakeEngine);

        var socket = window.io.connect(window.location.hostname),
            game = new window.Game(socket),
            renderer = new window.SnakeRenderer(),
            renderLoop = new window.RenderLoop(game, renderer);

        $('body').on('keyup', function(e){
          switch(e.which){
            case 38:
              game.emit('gameevent', {type: 'keyNorth'});
              break;
            case 40:
              game.emit('gameevent', {type: 'keySouth'});
              break;
            case 37:
              game.emit('gameevent', {type: 'keyWest'});
              break;
            case 39:
              game.emit('gameevent', {type: 'keyEast'});
              break;
            case 81:
              if($('div.popup').is(':visible'))
                $('div.popup').hide();
              else
                $('div.popup').show();
              break;
            default:
              console.log('you hit ' + e.which);
              break;
          }
        });

        $('input#nickname').on('change', function(){
          var nickname = $(this).val();
          if(nickname.trim().length)
            game.emit('gameevent', {type: 'nameChange', newName: nickname});
        });
      });
    </script>
  </head>
  <body>
    <div class="game">
    </div>
    <div class="popup">
      <table class="scoreboard">
        <tr><td>Player</td><td>Kills</td><td>Deaths</td><td>Maximum Length</td></tr>
      </table>
      <input type="text" id="nickname" placeholder="Nickname" />
    </div>
  </body>
</html>
